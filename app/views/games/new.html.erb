<div class="street-view">
<div id="map-canvas" style="width:100%; height:450px"></div>
</div>

<button class="ui teal button">Guess</button>

<script>
$('.ui.teal.button').click(function(){
  $('.ui.basic.modal').modal({
    closable: false
  })
  .modal('show');
});
</script>
<div class="ui basic modal">
  <div class="header" style="text-align:center">
    Where are you?  Place a pin on the map.
  </div>
  <div id="map" style="width:100%; height:400px;"></div>
  <div class="actions">
    <div class="two fluid ui inverted buttons">
      <div class="ui red basic inverted button">
        <%= link_to "Go home", root_path %>
      </div>
      <div class="ui green basic inverted button">
        Guess!
      </div>
    </div>
  </div>
</div>

<!-- <div class="ui modal">
  <div class="header" style="text-align:center">
    Where are you? Place a pin on the map.
  </div>
  <div class="content">
    <div>
      <div id="map" style="width:600px; height:400px;"></div>
    </div>
  <div class="actions">
    <div class="ui black button">
      <%= link_to "Go home", root_path %>
    </div>
    <div class="ui positive right button">
      Guess!
    </div>
  </div>
</div>
</div> -->




<script type="text/javascript">
  $(document).ready(function() {
    function initialize() {

      var lat = <%= @location.latitude %>

      var lng = <%= @location.longitude %>
      // var location =  new google.maps.LatLng(37.869260, -122.254811);
      var location =  new google.maps.LatLng(lat, lng);
      var panoramaOptions = {
        position: location,
        addressControl: false,
        linksControl: false,
        panControl: false,
        zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL
        },
        enableCloseButton: false
      };


    var myPano = new google.maps.StreetViewPanorama(document.getElementById('map-canvas'),
        panoramaOptions);
    myPano.setVisible(true);

    setInterval(function() {
      $('.gm-style').find('a').first().attr('href', 'http://maps.google.com');
    }, 50)
    }

  google.maps.event.addDomListener(window, 'load', initialize);


  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function() {
    handler.bounds.extendWith();
    handler.fitMapToBounds();
  });

});
</script>
